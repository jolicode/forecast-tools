{% extends 'base.html.twig' %}

{% form_theme form _self %}

{% block _forecast_alert_projectOverrides_entry_row %}
    <div class="override">
        <div class="form-group">
            {{ form_label(form.projectId) }}
            {{ form_errors(form.projectId) }}
            {{ form_widget(form.projectId, { attr: { class: 'form-control' }}) }}
            {{ form_help(form.projectId) }}
        </div>
        <div class="form-group">
            {{ form_label(form.name) }}
            {{ form_errors(form.name) }}
            {{ form_widget(form.name, { attr: { class: 'form-control' }}) }}
            {{ form_help(form.name) }}
        </div>
    </div>
{% endblock %}

{% block _forecast_alert_clientOverrides_entry_row %}
    <div class="override">
        <div class="form-group">
            {{ form_label(form.clientId) }}
            {{ form_errors(form.clientId) }}
            {{ form_widget(form.clientId, { attr: { class: 'form-control' }}) }}
            {{ form_help(form.clientId) }}
        </div>
        <div class="form-group">
            {{ form_label(form.name) }}
            {{ form_errors(form.name) }}
            {{ form_widget(form.name, { attr: { class: 'form-control' }}) }}
            {{ form_help(form.name) }}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('alert') }}
{% endblock %}

{% block body %}
    <div>
        {% if alert is defined %}
            <h1>Edit alert "{{ alert.name }}"</h1>
        {% else %}
            <h1>Create an alert</h1>
        {% endif %}

        {{ form_start(form) }}
            {{ form_errors(form) }}

                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link active" id="properties-tab" data-toggle="tab" href="#nav-properties" role="tab" aria-controls="nav-properties" aria-selected="true">Properties</a>
                        <a class="nav-item nav-link" id="labels-tab" data-toggle="tab" href="#nav-labels" role="tab" aria-controls="nav-labels" aria-selected="false">Labels</a>
                        <a class="nav-item nav-link" id="users-tab" data-toggle="tab" href="#nav-users" role="tab" aria-controls="nav-users" aria-selected="false">Users</a>
                        <a class="nav-item nav-link" id="project-overrides-tab" data-toggle="tab" href="#nav-project-overrides" role="tab" aria-controls="nav-project-overrides" aria-selected="false">Project overrides</a>
                        <a class="nav-item nav-link" id="client-overrides-tab" data-toggle="tab" href="#nav-client-overrides" role="tab" aria-controls="nav-client-overrides" aria-selected="false">Client overrides</a>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane show active" id="nav-properties" role="tabpanel" aria-labelledby="properties-tab">
                        <div class="form-group">
                            {{ form_label(form.name) }}
                            {{ form_errors(form.name) }}
                            {{ form_widget(form.name, { attr: { class: 'form-control' }}) }}
                            {{ form_help(form.name) }}
                        </div>

                        {% if alert is defined %}
                            <div class="form-group">
                                Created on <strong>{{ alert.createdAt|date('F jS \\a\\t g:ia') }}</strong> by <strong>{{ alert.createdBy }}</strong>
                            </div>
                        {% endif %}

                        <div class="form-group">
                            {{ form_label(form.forecastAccount) }}
                            {{ form_errors(form.forecastAccount) }}
                            {{ form_widget(form.forecastAccount, { attr: { class: 'form-control' }}) }}
                            {{ form_help(form.forecastAccount) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.cronExpression) }}
                            {{ form_errors(form.cronExpression) }}
                            {{ form_widget(form.cronExpression, { attr: { class: 'form-control' }}) }}
                            {{ form_help(form.cronExpression) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.slackWebHook) }}
                            {{ form_errors(form.slackWebHook) }}
                            {{ form_widget(form.slackWebHook, { attr: { class: 'form-control' }}) }}
                            {{ form_help(form.slackWebHook) }}
                        </div>
                    </div>

                    <div class="tab-pane" id="nav-labels" role="tabpanel" aria-labelledby="labels-tab">
                        <div class="form-group">
                            {{ form_label(form.defaultActivityName) }}
                            {{ form_errors(form.defaultActivityName) }}
                            {{ form_widget(form.defaultActivityName, { attr: { class: 'form-control' }}) }}
                            {{ form_help(form.defaultActivityName) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.timeOffActivityName) }}
                            {{ form_errors(form.timeOffActivityName) }}
                            {{ form_widget(form.timeOffActivityName, { attr: { class: 'form-control' }}) }}
                            {{ form_help(form.timeOffActivityName) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.timeOffProjects) }}
                            {{ form_errors(form.timeOffProjects) }}
                            <div>
                                {{ form_widget(form.timeOffProjects, { attr: { class: 'form-control timeoff-projects-selector' }}) }}
                            </div>
                            {{ form_help(form.timeOffProjects) }}
                        </div>
                    </div>

                    <div class="tab-pane" id="nav-users" role="tabpanel" aria-labelledby="users-tab">
                        <div class="form-group">
                            {{ form_label(form.onlyUsers) }}
                            {{ form_help(form.onlyUsers) }}
                            {{ form_errors(form.onlyUsers) }}
                            <div>
                                {{ form_widget(form.onlyUsers, { attr: { class: 'users-selector' }}) }}
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" id="nav-project-overrides" role="tabpanel" aria-labelledby="project-overrides-tab">
                        <div class="form-group">
                            {{ form_label(form.projectOverrides) }}
                            {{ form_help(form.projectOverrides) }}
                            {{ form_errors(form.projectOverrides) }}
                            <div>
                                {{ form_widget(form.projectOverrides, { attr: { class: 'overrides-container' }}) }}
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" id="nav-client-overrides" role="tabpanel" aria-labelledby="client-overrides-tab">
                        <div class="form-group">
                            {{ form_label(form.clientOverrides) }}
                            {{ form_help(form.clientOverrides) }}
                            {{ form_errors(form.clientOverrides) }}
                            <div>
                                {{ form_widget(form.clientOverrides, { attr: { class: 'overrides-container' }}) }}
                            </div>
                        </div>
                    </div>
                </div>
        {{ form_end(form) }}
    </div>
{% endblock %}
